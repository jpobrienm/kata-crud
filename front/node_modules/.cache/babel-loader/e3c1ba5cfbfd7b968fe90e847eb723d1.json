{"ast":null,"code":"var _jsxFileName = \"C:\\\\Estudio-Sofka\\\\Codigos\\\\kata-crud-refactoring-master\\\\front\\\\src\\\\App.js\";\nimport React, { useContext, useReducer, useEffect, useRef, useState, createContext } from 'react';\nconst HOST_API = \"http://localhost:8080/api\";\nconst initialState = {\n  todo: {\n    list: [],\n    item: {}\n  }\n};\nconst Store = createContext(initialState);\n\nconst List = () => {\n  const {\n    dispatch,\n    state: {\n      todo\n    }\n  } = useContext(Store);\n  const currentList = todo.list;\n  useEffect(() => {\n    fetch(HOST_API + \"/todos\").then(response => response.json()).then(list => {\n      dispatch({\n        type: \"update-list\",\n        list\n      });\n    });\n  }, [dispatch]);\n\n  const onDelete = id => {\n    fetch(HOST_API + \"/\" + id + \"/todo\", {\n      method: \"DELETE\"\n    }).then(list => {\n      dispatch({\n        type: \"delete-item\",\n        id\n      });\n    });\n  };\n\n  const onEdit = todo => {\n    dispatch({\n      type: \"edit-item\",\n      item: todo\n    });\n  };\n\n  const onChange = (event, todo) => {\n    const request = {\n      name: todo.name,\n      id: todo.id,\n      completed: event.target.checked\n    };\n    fetch(HOST_API + \"/todo\", {\n      method: \"PUT\",\n      body: JSON.stringify(request),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(todo => {\n      dispatch({\n        type: \"update-item\",\n        item: todo\n      });\n    });\n  };\n\n  const decorationDone = {\n    textDecoration: 'line-through'\n  };\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(\"thead\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"ID\"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Tarea\"), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"\\xBFCompletado?\"))), React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, currentList.map(todo => {\n    return React.createElement(\"tr\", {\n      key: todo.id,\n      style: todo.completed ? decorationDone : {},\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, todo.id), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, todo.name), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      defaultChecked: todo.completed,\n      onChange: event => onChange(event, todo),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => onDelete(todo.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Eliminar\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => onEdit(todo),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Editar\")));\n  }))));\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'update-item':\n      const todoUpItem = state.todo;\n      const listUpdateEdit = todoUpItem.list.map(item => {\n        if (item.id === action.item.id) {\n          return action.item;\n        }\n\n        return item;\n      });\n      todoUpItem.list = listUpdateEdit;\n      todoUpItem.item = {};\n      return { ...state,\n        todo: todoUpItem\n      };\n\n    case 'delete-item':\n      const todoUpDelete = state.todo;\n      const listUpdate = todoUpDelete.list.filter(item => {\n        return item.id !== action.id;\n      });\n      todoUpDelete.list = listUpdate;\n      return { ...state,\n        todo: todoUpDelete\n      };\n\n    case 'update-list':\n      const todoUpList = state.todo;\n      todoUpList.list = action.list;\n      return { ...state,\n        todo: todoUpList\n      };\n\n    case 'edit-item':\n      const todoUpEdit = state.todo;\n      todoUpEdit.item = action.item;\n      return { ...state,\n        todo: todoUpEdit\n      };\n\n    case 'add-item':\n      const todoUp = state.todo.list;\n      todoUp.push(action.item);\n      return { ...state,\n        todo: {\n          list: todoUp,\n          item: {}\n        }\n      };\n\n    default:\n      return state;\n  }\n}\n\nconst StoreProvider = ({\n  children\n}) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  return React.createElement(Store.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, children);\n};\n\nfunction App() {\n  return React.createElement(StoreProvider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, \"To-Do List\"), React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }), React.createElement(List, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Estudio-Sofka/Codigos/kata-crud-refactoring-master/front/src/App.js"],"names":["React","useContext","useReducer","useEffect","useRef","useState","createContext","HOST_API","initialState","todo","list","item","Store","List","dispatch","state","currentList","fetch","then","response","json","type","onDelete","id","method","onEdit","onChange","event","request","name","completed","target","checked","body","JSON","stringify","headers","decorationDone","textDecoration","map","reducer","action","todoUpItem","listUpdateEdit","todoUpDelete","listUpdate","filter","todoUpList","todoUpEdit","todoUp","push","StoreProvider","children","App"],"mappings":"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","sourcesContent":["import React, { useContext, useReducer, useEffect, useRef, useState, createContext } from 'react';\n\nconst HOST_API = \"http://localhost:8080/api\";\nconst initialState = {\n  todo: { list: [], item: {} }\n};\nconst Store = createContext(initialState)\n\n\n\n\n\nconst List = () => {\n  const { dispatch, state: { todo } } = useContext(Store);\n  const currentList = todo.list;\n\n  useEffect(() => {\n    fetch(HOST_API + \"/todos\")\n      .then(response => response.json())\n      .then((list) => {\n        dispatch({ type: \"update-list\", list })\n      })\n  }, [dispatch]);\n\n\n  const onDelete = (id) => {\n    fetch(HOST_API + \"/\" + id + \"/todo\", {\n      method: \"DELETE\"\n    }).then((list) => {\n      dispatch({ type: \"delete-item\", id })\n    })\n  };\n\n  const onEdit = (todo) => {\n    dispatch({ type: \"edit-item\", item: todo })\n  };\n\n  const onChange = (event, todo) => {\n    const request = {\n      name: todo.name,\n      id: todo.id,\n      completed: event.target.checked\n    };\n    fetch(HOST_API + \"/todo\", {\n      method: \"PUT\",\n      body: JSON.stringify(request),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n      .then(response => response.json())\n      .then((todo) => {\n        dispatch({ type: \"update-item\", item: todo });\n      });\n  };\n\n  const decorationDone = {\n    textDecoration: 'line-through'\n  };\n  return <div>\n    <table >\n      <thead>\n        <tr>\n          <td>ID</td>\n          <td>Tarea</td>\n          <td>¿Completado?</td>\n        </tr>\n      </thead>\n      <tbody>\n        {currentList.map((todo) => {\n          return <tr key={todo.id} style={todo.completed ? decorationDone : {}}>\n            <td>{todo.id}</td>\n            <td>{todo.name}</td>\n            <td><input type=\"checkbox\" defaultChecked={todo.completed} onChange={(event) => onChange(event, todo)}></input></td>\n            <td><button onClick={() => onDelete(todo.id)}>Eliminar</button></td>\n            <td><button onClick={() => onEdit(todo)}>Editar</button></td>\n          </tr>\n        })}\n      </tbody>\n    </table>\n  </div>\n}\n\n\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'update-item':\n      const todoUpItem = state.todo;\n      const listUpdateEdit = todoUpItem.list.map((item) => {\n        if (item.id === action.item.id) {\n          return action.item;\n        }\n        return item;\n      });\n      todoUpItem.list = listUpdateEdit;\n      todoUpItem.item = {};\n      return { ...state, todo: todoUpItem }\n    case 'delete-item':\n      const todoUpDelete = state.todo;\n      const listUpdate = todoUpDelete.list.filter((item) => {\n        return item.id !== action.id;\n      });\n      todoUpDelete.list = listUpdate;\n      return { ...state, todo: todoUpDelete }\n    case 'update-list':\n      const todoUpList = state.todo;\n      todoUpList.list = action.list;\n      return { ...state, todo: todoUpList }\n    case 'edit-item':\n      const todoUpEdit = state.todo;\n      todoUpEdit.item = action.item;\n      return { ...state, todo: todoUpEdit }\n    case 'add-item':\n      const todoUp = state.todo.list;\n      todoUp.push(action.item);\n      return { ...state, todo: {list: todoUp, item: {}} }\n    default:\n      return state;\n  }\n}\n\nconst StoreProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  return <Store.Provider value={{ state, dispatch }}>\n    {children}\n  </Store.Provider>\n\n}\n\nfunction App() {\n  return <StoreProvider>\n    <h3>To-Do List</h3>\n    <Form />\n    <List />\n  </StoreProvider>\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}